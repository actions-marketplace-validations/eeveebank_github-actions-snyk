name: "Snyk Scan"
description: "Scans repository with Snyk"
branding:
  color: purple
  icon: activity
inputs:
  type:
    required: false
    description: "Scan type"
    default: iac
  severity:
    required: false
    description: "Severity level threshold"
    default: low
runs:
  using: "docker"
  image: "docker://eu.gcr.io/mettle-bank/snyk/snyk:alpine"
  env:
    SNYK_INTEGRATION_NAME: GITHUB_ACTIONS
    SNYK_INTEGRATION_VERSION: ${{ inputs.type }}
  args:
    - snyk
    - ${{ inputs.type }}
    - test
    - --sarif-file-output=snyk.sarif
    - --severity-threshold=${{ inputs.severity }}
